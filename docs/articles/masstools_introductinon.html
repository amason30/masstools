<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>masstools_introductinon • masstools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="masstools_introductinon">
<meta property="og:description" content="masstools">
<meta property="og:image" content="https://tidymass.github.io/masstools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-000000-01"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-000000-01');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">masstools</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help documents
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/install.html">Installation</a>
    </li>
    <li>
      <a href="../articles/masstools_introductinon.html">Introduction if masstools</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Blog posts</li>
    <li>
      <a href="../articles/masstools.html">Version 0.4.0</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/contact_us.html">Contact us</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tidymass/masstools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/JasperShen1990" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="masstools_introductinon_files/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="masstools_introductinon_files/plotly-binding-4.9.4.1/plotly.js"></script><script src="masstools_introductinon_files/typedarray-0.1/typedarray.min.js"></script><script src="masstools_introductinon_files/jquery-3.5.1/jquery.min.js"></script><link href="masstools_introductinon_files/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="masstools_introductinon_files/crosstalk-1.1.1/js/crosstalk.min.js"></script><link href="masstools_introductinon_files/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="masstools_introductinon_files/plotly-main-1.57.1/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>masstools_introductinon</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymass/masstools/blob/HEAD/vignettes/masstools_introductinon.Rmd" class="external-link"><code>vignettes/masstools_introductinon.Rmd</code></a></small>
      <div class="hidden name"><code>masstools_introductinon.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymass/masstools" class="external-link">masstools</a></span><span class="op">)</span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Attaching packages</span> ────────────────────────────────────── masstools 0.99.1 ──</span>
<span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #0000BB;">magrittr</span> 2.0.1</span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── masstools_conflicts() ──</span>
<span class="co">#&gt; <span style="color: #BB0000;">x</span> <span style="color: #0000BB;">methods</span>::<span style="color: #00BB00;">body&lt;-()</span>    masks <span style="color: #0000BB;">base</span>::body&lt;-()</span>
<span class="co">#&gt; <span style="color: #BB0000;">x</span> <span style="color: #0000BB;">methods</span>::<span style="color: #00BB00;">kronecker()</span> masks <span style="color: #0000BB;">base</span>::kronecker()</span></code></pre></div>
<div class="section level1">
<h1 id="chemical-formula-operation">
<strong>Chemical formula operation</strong><a class="anchor" aria-label="anchor" href="#chemical-formula-operation"></a>
</h1>
<p>You can use <code>masstools</code> to do the chemical formula operation.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymass/masstools" class="external-link">masstools</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/sum_formula.html">sum_formula</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"C9H11NO2"</span>, adduct <span class="op">=</span> <span class="st">"M+H"</span><span class="op">)</span>
<span class="co">#&gt; [1] "C9H12NO2"</span>
<span class="fu"><a href="../reference/sum_formula.html">sum_formula</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"C9H11NO2"</span>, adduct <span class="op">=</span> <span class="st">"M+"</span><span class="op">)</span>
<span class="co">#&gt; [1] "C9H11NO2"</span>
<span class="fu"><a href="../reference/sum_formula.html">sum_formula</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"C9H11NO2"</span>, adduct <span class="op">=</span> <span class="st">"M+CH3COOH"</span><span class="op">)</span>
<span class="co">#&gt; [1] "C11H15NO4"</span>
<span class="fu"><a href="../reference/sum_formula.html">sum_formula</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"C9H11"</span>, adduct <span class="op">=</span> <span class="st">"M-H20"</span><span class="op">)</span>
<span class="co">#&gt; [1] NA</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/split_formula.html">split_formula</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"C9H11NO2"</span><span class="op">)</span>
<span class="co">#&gt;   element.name number</span>
<span class="co">#&gt; 2            C      9</span>
<span class="co">#&gt; 3            H     11</span>
<span class="co">#&gt; 4            N      1</span>
<span class="co">#&gt; 5            O      2</span>
<span class="fu"><a href="../reference/split_formula.html">split_formula</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"C2H4"</span><span class="op">)</span>
<span class="co">#&gt;   element.name number</span>
<span class="co">#&gt; 2            C      2</span>
<span class="co">#&gt; 3            H      4</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="ms2-spectra-operation">
<strong>MS2 spectra operation</strong><a class="anchor" aria-label="anchor" href="#ms2-spectra-operation"></a>
</h1>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">###remove the noisy peaks in one ms2 spectrum</span>
<span class="va">exp.spectrum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1.0001</span><span class="op">)</span>, 
                           intensity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/ms2_plot.html">ms2_plot</a></span><span class="op">(</span><span class="va">exp.spectrum</span><span class="op">)</span></code></pre></div>
<p><img src="masstools_introductinon_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">exp.spectrum2</span> <span class="op">=</span> <span class="fu"><a href="../reference/removeNoise.html">removeNoise</a></span><span class="op">(</span><span class="va">exp.spectrum</span><span class="op">)</span>

<span class="fu"><a href="../reference/ms2_plot.html">ms2_plot</a></span><span class="op">(</span><span class="va">exp.spectrum</span>, <span class="va">exp.spectrum2</span><span class="op">)</span></code></pre></div>
<p><img src="masstools_introductinon_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">###match two spectra according to mz</span>
<span class="va">exp.spectrum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, intensity <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="va">lib.spectrum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, intensity <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="../reference/ms2Match.html">ms2Match</a></span><span class="op">(</span><span class="va">exp.spectrum</span>, <span class="va">lib.spectrum</span><span class="op">)</span>
<span class="co">#&gt;    Lib.index Exp.index Lib.mz Lib.intensity Exp.mz Exp.intensity</span>
<span class="co">#&gt; 1          1         1      1             1      1             1</span>
<span class="co">#&gt; 2          2         2      2             2      2             2</span>
<span class="co">#&gt; 3          3         3      3             3      3             3</span>
<span class="co">#&gt; 4          4         4      4             4      4             4</span>
<span class="co">#&gt; 5          5         5      5             5      5             5</span>
<span class="co">#&gt; 6          6         6      6             6      6             6</span>
<span class="co">#&gt; 7          7         7      7             7      7             7</span>
<span class="co">#&gt; 8          8         8      8             8      8             8</span>
<span class="co">#&gt; 9          9         9      9             9      9             9</span>
<span class="co">#&gt; 10        10        10     10            10     10            10</span>


<span class="co">## calculate the dot product of two matched intensity</span>
<span class="fu"><a href="../reference/getDP.html">getDP</a></span><span class="op">(</span>exp.int <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, lib.int <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span>
<span class="fu"><a href="../reference/getDP.html">getDP</a></span><span class="op">(</span>exp.int <span class="op">=</span> <span class="fl">10</span><span class="op">:</span><span class="fl">1</span>, lib.int <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.379698</span>

<span class="co">###matched two spectra and calculate dot product</span>
<span class="va">exp.spectrum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, intensity <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="va">lib.spectrum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, intensity <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="../reference/getSpectraMatchScore.html">getSpectraMatchScore</a></span><span class="op">(</span><span class="va">exp.spectrum</span>, <span class="va">lib.spectrum</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span></code></pre></div>
<p>MS2 plot and MS2 matching plot.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">spectrum1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
    mz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
        <span class="fl">87.50874</span>,
        <span class="fl">94.85532</span>,
        <span class="fl">97.17808</span>,
        <span class="fl">97.25629</span>,
        <span class="fl">103.36186</span>,
        <span class="fl">106.96647</span>,
        <span class="fl">107.21461</span>,
        <span class="fl">111.00887</span>,
        <span class="fl">113.79269</span>,
        <span class="fl">118.70564</span>
    <span class="op">)</span>,
    intensity <span class="op">=</span>
        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
            <span class="fl">8356.306</span>,
            <span class="fl">7654.128</span>,
            <span class="fl">9456.207</span>,
            <span class="fl">8837.188</span>,
            <span class="fl">8560.228</span>,
            <span class="fl">8746.359</span>,
            <span class="fl">8379.361</span>,
            <span class="fl">169741.797</span>,
            <span class="fl">7953.080</span>,
            <span class="fl">8378.066</span>
        <span class="op">)</span>
<span class="op">)</span>
<span class="va">spectrum2</span> <span class="op">&lt;-</span> <span class="va">spectrum1</span>
<span class="fu"><a href="../reference/ms2_plot.html">ms2_plot</a></span><span class="op">(</span><span class="va">spectrum1</span>, <span class="va">spectrum2</span><span class="op">)</span></code></pre></div>
<p><img src="masstools_introductinon_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ms2_plot.html">ms2_plot</a></span><span class="op">(</span><span class="va">spectrum1</span>, <span class="va">spectrum2</span>, interactive_plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-7dd9b23cfcb97b21263f" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-7dd9b23cfcb97b21263f">{"x":{"data":[{"x":[87.50874,87.50874,null,94.85532,94.85532,null,97.17808,97.17808,null,97.25629,97.25629,null,103.36186,103.36186,null,106.96647,106.96647,null,107.21461,107.21461,null,111.00887,111.00887,null,113.79269,113.79269,null,118.70564,118.70564],"y":[0,0.0492295129878942,null,0,0.0450927711104649,null,0,0.0557093607298148,null,0,0.0520625335432262,null,0,0.0504308788483016,null,0,0.0515274325745473,null,0,0.049365336929949,null,0,1,null,0,0.0468539872945966,null,0,0.0493577076952944],"text":["Exp.mz:  87.50874<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  87.50874<br />Exp.intensity: 0.04922951","Exp.mz:  87.50874<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  87.50874<br />Exp.intensity: 0.04922951",null,"Exp.mz:  94.85532<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  94.85532<br />Exp.intensity: 0.04509277","Exp.mz:  94.85532<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  94.85532<br />Exp.intensity: 0.04509277",null,"Exp.mz:  97.17808<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  97.17808<br />Exp.intensity: 0.05570936","Exp.mz:  97.17808<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  97.17808<br />Exp.intensity: 0.05570936",null,"Exp.mz:  97.25629<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  97.25629<br />Exp.intensity: 0.05206253","Exp.mz:  97.25629<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz:  97.25629<br />Exp.intensity: 0.05206253",null,"Exp.mz: 103.36186<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 103.36186<br />Exp.intensity: 0.05043088","Exp.mz: 103.36186<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 103.36186<br />Exp.intensity: 0.05043088",null,"Exp.mz: 106.96647<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 106.96647<br />Exp.intensity: 0.05152743","Exp.mz: 106.96647<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 106.96647<br />Exp.intensity: 0.05152743",null,"Exp.mz: 107.21461<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 107.21461<br />Exp.intensity: 0.04936534","Exp.mz: 107.21461<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 107.21461<br />Exp.intensity: 0.04936534",null,"Exp.mz: 111.00887<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 111.00887<br />Exp.intensity: 1.00000000","Exp.mz: 111.00887<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 111.00887<br />Exp.intensity: 1.00000000",null,"Exp.mz: 113.79269<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 113.79269<br />Exp.intensity: 0.04685399","Exp.mz: 113.79269<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 113.79269<br />Exp.intensity: 0.04685399",null,"Exp.mz: 118.70564<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 118.70564<br />Exp.intensity: 0.04935771","Exp.mz: 118.70564<br />Exp.intensity - Exp.intensity: 0<br />Exp.mz: 118.70564<br />Exp.intensity: 0.04935771"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[87.50874,94.85532,97.17808,97.25629,103.36186,106.96647,107.21461,111.00887,113.79269,118.70564],"y":[0.0492295129878942,0.0450927711104649,0.0557093607298148,0.0520625335432262,0.0504308788483016,0.0515274325745473,0.049365336929949,1,0.0468539872945966,0.0493577076952944],"text":["Exp.mz:  87.50874<br />Exp.intensity: 0.04922951","Exp.mz:  94.85532<br />Exp.intensity: 0.04509277","Exp.mz:  97.17808<br />Exp.intensity: 0.05570936","Exp.mz:  97.25629<br />Exp.intensity: 0.05206253","Exp.mz: 103.36186<br />Exp.intensity: 0.05043088","Exp.mz: 106.96647<br />Exp.intensity: 0.05152743","Exp.mz: 107.21461<br />Exp.intensity: 0.04936534","Exp.mz: 111.00887<br />Exp.intensity: 1.00000000","Exp.mz: 113.79269<br />Exp.intensity: 0.04685399","Exp.mz: 118.70564<br />Exp.intensity: 0.04935771"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null],"y":[null],"text":"spectrum1","hovertext":"x: Inf<br />y: Inf","textfont":{"size":14.6645669291339,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null],"y":[null],"text":"spectrum2","hovertext":"x: Inf<br />y: -Inf","textfont":{"size":14.6645669291339,"color":"rgba(255,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[87.50874,87.50874,null,94.85532,94.85532,null,97.17808,97.17808,null,97.25629,97.25629,null,103.36186,103.36186,null,106.96647,106.96647,null,107.21461,107.21461,null,111.00887,111.00887,null,113.79269,113.79269,null,118.70564,118.70564],"y":[0,-0.0492295129878942,null,0,-0.0450927711104649,null,0,-0.0557093607298148,null,0,-0.0520625335432262,null,0,-0.0504308788483016,null,0,-0.0515274325745473,null,0,-0.049365336929949,null,0,-1,null,0,-0.0468539872945966,null,0,-0.0493577076952944],"text":["Lib.mz:  87.50874<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  87.50874<br />-Lib.intensity: -0.04922951","Lib.mz:  87.50874<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  87.50874<br />-Lib.intensity: -0.04922951",null,"Lib.mz:  94.85532<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  94.85532<br />-Lib.intensity: -0.04509277","Lib.mz:  94.85532<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  94.85532<br />-Lib.intensity: -0.04509277",null,"Lib.mz:  97.17808<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  97.17808<br />-Lib.intensity: -0.05570936","Lib.mz:  97.17808<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  97.17808<br />-Lib.intensity: -0.05570936",null,"Lib.mz:  97.25629<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  97.25629<br />-Lib.intensity: -0.05206253","Lib.mz:  97.25629<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz:  97.25629<br />-Lib.intensity: -0.05206253",null,"Lib.mz: 103.36186<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 103.36186<br />-Lib.intensity: -0.05043088","Lib.mz: 103.36186<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 103.36186<br />-Lib.intensity: -0.05043088",null,"Lib.mz: 106.96647<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 106.96647<br />-Lib.intensity: -0.05152743","Lib.mz: 106.96647<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 106.96647<br />-Lib.intensity: -0.05152743",null,"Lib.mz: 107.21461<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 107.21461<br />-Lib.intensity: -0.04936534","Lib.mz: 107.21461<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 107.21461<br />-Lib.intensity: -0.04936534",null,"Lib.mz: 111.00887<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 111.00887<br />-Lib.intensity: -1.00000000","Lib.mz: 111.00887<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 111.00887<br />-Lib.intensity: -1.00000000",null,"Lib.mz: 113.79269<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 113.79269<br />-Lib.intensity: -0.04685399","Lib.mz: 113.79269<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 113.79269<br />-Lib.intensity: -0.04685399",null,"Lib.mz: 118.70564<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 118.70564<br />-Lib.intensity: -0.04935771","Lib.mz: 118.70564<br />Lib.intensity - Lib.intensity: 0<br />Lib.mz: 118.70564<br />-Lib.intensity: -0.04935771"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[87.50874,94.85532,97.17808,97.25629,103.36186,106.96647,107.21461,111.00887,113.79269,118.70564],"y":[-0.0492295129878942,-0.0450927711104649,-0.0557093607298148,-0.0520625335432262,-0.0504308788483016,-0.0515274325745473,-0.049365336929949,-1,-0.0468539872945966,-0.0493577076952944],"text":["Lib.mz:  87.50874<br />-Lib.intensity: -0.04922951","Lib.mz:  94.85532<br />-Lib.intensity: -0.04509277","Lib.mz:  97.17808<br />-Lib.intensity: -0.05570936","Lib.mz:  97.25629<br />-Lib.intensity: -0.05206253","Lib.mz: 103.36186<br />-Lib.intensity: -0.05043088","Lib.mz: 106.96647<br />-Lib.intensity: -0.05152743","Lib.mz: 107.21461<br />-Lib.intensity: -0.04936534","Lib.mz: 111.00887<br />-Lib.intensity: -1.00000000","Lib.mz: 113.79269<br />-Lib.intensity: -0.04685399","Lib.mz: 118.70564<br />-Lib.intensity: -0.04935771"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":27.82100456621,"r":7.30593607305936,"b":55.3245330012453,"l":60.7721046077211},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[85.948895,120.265485],"tickmode":"array","ticktext":["90","100","110","120"],"tickvals":[90,100,110,120],"categoryorder":"array","categoryarray":["90","100","110","120"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Mass to charge ratio (m/z)","font":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.1,1.1],"tickmode":"array","ticktext":["1","0.5","0","0.5","1"],"tickvals":[-1,-0.5,0,0.5,1],"categoryorder":"array","categoryarray":["1","0.5","0","0.5","1"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Relative intensity","font":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"a1e753c7288d":{"x":{},"y":{},"xend":{},"yend":{},"type":"scatter"},"a1e738376bf3":{"x":{},"y":{}},"a1e73e903b5a":{"x":{},"y":{}},"a1e76f28b1cc":{"x":{},"y":{}},"a1e758b10117":{"x":{},"y":{},"xend":{},"yend":{}},"a1e74cbeba7e":{"x":{},"y":{}}},"cur_data":"a1e753c7288d","visdat":{"a1e753c7288d":["function (y) ","x"],"a1e738376bf3":["function (y) ","x"],"a1e73e903b5a":["function (y) ","x"],"a1e76f28b1cc":["function (y) ","x"],"a1e758b10117":["function (y) ","x"],"a1e74cbeba7e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
ms2_plot(spectrum1)
<p><img src="masstools_introductinon_files/figure-html/unnamed-chunk-6-3.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ms2_plot.html">ms2_plot</a></span><span class="op">(</span><span class="va">spectrum1</span>, interactive_plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-c5e09dd966a14ad54483" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c5e09dd966a14ad54483">{"x":{"data":[{"x":[87.50874,87.50874,null,94.85532,94.85532,null,97.17808,97.17808,null,97.25629,97.25629,null,103.36186,103.36186,null,106.96647,106.96647,null,107.21461,107.21461,null,111.00887,111.00887,null,113.79269,113.79269,null,118.70564,118.70564],"y":[0,0.0492295129878942,null,0,0.0450927711104649,null,0,0.0557093607298148,null,0,0.0520625335432262,null,0,0.0504308788483016,null,0,0.0515274325745473,null,0,0.049365336929949,null,0,1,null,0,0.0468539872945966,null,0,0.0493577076952944],"text":["mz:  87.50874<br />y: 0<br />mz:  87.50874<br />intensity: 0.04922951","mz:  87.50874<br />y: 0<br />mz:  87.50874<br />intensity: 0.04922951",null,"mz:  94.85532<br />y: 0<br />mz:  94.85532<br />intensity: 0.04509277","mz:  94.85532<br />y: 0<br />mz:  94.85532<br />intensity: 0.04509277",null,"mz:  97.17808<br />y: 0<br />mz:  97.17808<br />intensity: 0.05570936","mz:  97.17808<br />y: 0<br />mz:  97.17808<br />intensity: 0.05570936",null,"mz:  97.25629<br />y: 0<br />mz:  97.25629<br />intensity: 0.05206253","mz:  97.25629<br />y: 0<br />mz:  97.25629<br />intensity: 0.05206253",null,"mz: 103.36186<br />y: 0<br />mz: 103.36186<br />intensity: 0.05043088","mz: 103.36186<br />y: 0<br />mz: 103.36186<br />intensity: 0.05043088",null,"mz: 106.96647<br />y: 0<br />mz: 106.96647<br />intensity: 0.05152743","mz: 106.96647<br />y: 0<br />mz: 106.96647<br />intensity: 0.05152743",null,"mz: 107.21461<br />y: 0<br />mz: 107.21461<br />intensity: 0.04936534","mz: 107.21461<br />y: 0<br />mz: 107.21461<br />intensity: 0.04936534",null,"mz: 111.00887<br />y: 0<br />mz: 111.00887<br />intensity: 1.00000000","mz: 111.00887<br />y: 0<br />mz: 111.00887<br />intensity: 1.00000000",null,"mz: 113.79269<br />y: 0<br />mz: 113.79269<br />intensity: 0.04685399","mz: 113.79269<br />y: 0<br />mz: 113.79269<br />intensity: 0.04685399",null,"mz: 118.70564<br />y: 0<br />mz: 118.70564<br />intensity: 0.04935771","mz: 118.70564<br />y: 0<br />mz: 118.70564<br />intensity: 0.04935771"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":27.82100456621,"r":7.30593607305936,"b":55.3245330012453,"l":70.7347447073475},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[85.948895,120.265485],"tickmode":"array","ticktext":["90","100","110","120"],"tickvals":[90,100,110,120],"categoryorder":"array","categoryarray":["90","100","110","120"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Mass to charge ratio (m/z)","font":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1.1],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Relative intensity","font":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":19.9252801992528}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"a1e77d07e8fd":{"x":{},"y":{},"xend":{},"yend":{},"type":"scatter"}},"cur_data":"a1e77d07e8fd","visdat":{"a1e77d07e8fd":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level1">
<h1 id="match-two-feature-tables">
<strong>Match two feature tables</strong><a class="anchor" aria-label="anchor" href="#match-two-feature-tables"></a>
</h1>
<p>We can match two feature tables according to mz and retention time.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, rt <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mz <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, rt <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="../reference/mz_rt_match.html">mz_rt_match</a></span><span class="op">(</span><span class="va">data1</span>, <span class="va">data2</span>, mz.tol <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;    Index1 Index2 mz1 mz2 mz error rt1 rt2 rt error</span>
<span class="co">#&gt; 1       1      1   1   1        0   1   1        0</span>
<span class="co">#&gt; 2       2      2   2   2        0   2   2        0</span>
<span class="co">#&gt; 3       3      3   3   3        0   3   3        0</span>
<span class="co">#&gt; 4       4      4   4   4        0   4   4        0</span>
<span class="co">#&gt; 5       5      5   5   5        0   5   5        0</span>
<span class="co">#&gt; 6       6      6   6   6        0   6   6        0</span>
<span class="co">#&gt; 7       7      7   7   7        0   7   7        0</span>
<span class="co">#&gt; 8       8      8   8   8        0   8   8        0</span>
<span class="co">#&gt; 9       9      9   9   9        0   9   9        0</span>
<span class="co">#&gt; 10     10     10  10  10        0  10  10        0</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="compound-id-converter">
<strong>Compound ID converter</strong><a class="anchor" aria-label="anchor" href="#compound-id-converter"></a>
</h1>
<p>Two web tools are used for compound compound convert.</p>
<div class="section level2">
<h2 id="cts-fiehnlab">
<strong>1. cts.fiehnlab</strong><a class="anchor" aria-label="anchor" href="#cts-fiehnlab"></a>
</h2>
<p>cts.fiehnlab is <a href="http://cts.fiehnlab.ucdavis.edu/service/convert" class="external-link uri">http://cts.fiehnlab.ucdavis.edu/service/convert</a>. It support a lot of databases.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymass/masstools" class="external-link">masstools</a></span><span class="op">)</span></code></pre></div>
<p>We can use the <code><a href="../reference/trans_id_database.html">trans_id_database()</a></code> to get the databases that cts.fiehnlab.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">database_name</span> <span class="op">=</span> <span class="fu"><a href="../reference/trans_id_database.html">trans_id_database</a></span><span class="op">(</span>server <span class="op">=</span> <span class="st">"cts.fiehnlab"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BB00;">226 databases are supported in server</span></span>
<span class="co"><span style="color: #00BB00;">#&gt;         http://cts.fiehnlab.ucdavis.edu/service/convert for 'from'.</span></span>
<span class="co"><span style="color: #00BB00;">#&gt; 227 databases are supported in server</span></span>
<span class="co"><span style="color: #00BB00;">#&gt;         http://cts.fiehnlab.ucdavis.edu/service/convert for 'to'.</span></span>
<span class="co"><span style="color: #00BB00;">#&gt; </span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">database_name</span><span class="op">$</span><span class="va">From</span><span class="op">$</span><span class="va">From</span><span class="op">)</span>
<span class="co">#&gt; [1] "AAA Chemistry"     "ABBLIS Chemicals"  "Abbott Labs"      </span>
<span class="co">#&gt; [4] "ABI Chem"          "AbMole Bioscience" "Acesobio"</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">database_name</span><span class="op">$</span><span class="va">To</span><span class="op">$</span><span class="va">From</span><span class="op">)</span>
<span class="co">#&gt; [1] "AAA Chemistry"     "ABBLIS Chemicals"  "Abbott Labs"      </span>
<span class="co">#&gt; [4] "ABI Chem"          "AbMole Bioscience" "Acesobio"</span></code></pre></div>
<p>We can see that it support a lot of (&gt; 200) databases.</p>
<p>We can try the most common convert, from KEGG to HMDB.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/trans_ID.html">trans_ID</a></span><span class="op">(</span>
  query <span class="op">=</span> <span class="st">"C00001"</span>,
  from <span class="op">=</span> <span class="st">"KEGG"</span>,
  to <span class="op">=</span> <span class="st">"Human Metabolome Database"</span>,
  top <span class="op">=</span> <span class="fl">1</span>,
  server <span class="op">=</span> <span class="st">"cts.fiehnlab"</span>
<span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="co">#&gt;   KEGG   `Human Metabolome Database`</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> C00001 HMDB0002111</span></code></pre></div>
<p>Now, <code>trans_ID</code> doesn’t support verctor query. So you can use the <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> to achive this.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C00001"</span>, <span class="st">"C00001"</span>, <span class="st">"C00001"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span>
    .f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu"><a href="../reference/trans_ID.html">trans_ID</a></span><span class="op">(</span>
        query <span class="op">=</span> <span class="va">x</span>,
        from <span class="op">=</span> <span class="st">"KEGG"</span>,
        to <span class="op">=</span> <span class="st">"Human Metabolome Database"</span>,
        top <span class="op">=</span> <span class="fl">1</span>,
        server <span class="op">=</span> <span class="st">"cts.fiehnlab"</span>
      <span class="op">)</span>
    <span class="op">}</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;     KEGG Human Metabolome Database</span>
<span class="co">#&gt; 1 C00001               HMDB0002111</span>
<span class="co">#&gt; 2 C00001               HMDB0002111</span>
<span class="co">#&gt; 3 C00001               HMDB0002111</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="chemspider">
<strong>2. chemspider</strong><a class="anchor" aria-label="anchor" href="#chemspider"></a>
</h2>
<p>This is from <a href="https://www.chemspider.com/InChI.asmx" class="external-link uri">https://www.chemspider.com/InChI.asmx</a>.</p>
<p>We can use the <code><a href="../reference/trans_id_database.html">trans_id_database()</a></code> to get the databases that chemspider</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">database_name2</span> <span class="op">=</span> <span class="fu"><a href="../reference/trans_id_database.html">trans_id_database</a></span><span class="op">(</span>server <span class="op">=</span> <span class="st">"chemspider"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BB00;">9 are supported in server https://www.chemspider.com/InChI.asmx.</span></span>
<span class="co"><span style="color: #00BB00;">#&gt; </span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">database_name2</span><span class="op">$</span><span class="va">From</span>
<span class="co">#&gt; [1] "csid"     "inchikey" "inchikey" "inchikey" "inchi"    "inchi"    "inchi"   </span>
<span class="co">#&gt; [8] "inchi"    "smiles"</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">database_name2</span><span class="op">$</span><span class="va">To</span>
<span class="co">#&gt; [1] "mol"      "csid"     "inchi"    "mol"      "csid"     "inchikey" "mol"     </span>
<span class="co">#&gt; [8] "smiles"   "inchi"</span></code></pre></div>
<p>This is very useful if you want to get the inchikey, inchi or smiles for one compound. But this web only support “ChemSpider ID” (csid), so we need use cts.fiehnlab convert to csid first.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/trans_ID.html">trans_ID</a></span><span class="op">(</span>
  query <span class="op">=</span> <span class="st">"C00001"</span>,
  from <span class="op">=</span> <span class="st">"KEGG"</span>,
  to <span class="op">=</span> <span class="st">"ChemSpider"</span>,
  top <span class="op">=</span> <span class="fl">1</span>,
  server <span class="op">=</span> <span class="st">"cts.fiehnlab"</span>
<span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span>
<span class="co">#&gt;   KEGG   ChemSpider</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> C00001 140526</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/trans_ID.html">trans_ID</a></span><span class="op">(</span>
  query <span class="op">=</span> <span class="st">"140526"</span>,
  from <span class="op">=</span> <span class="st">"csid"</span>,
  to <span class="op">=</span> <span class="st">"mol"</span>,
  top <span class="op">=</span> <span class="fl">1</span>,
  server <span class="op">=</span> <span class="st">"chemspider"</span>
<span class="op">)</span>
<span class="co">#&gt; [1] NA</span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="get-compound-class-based-on-classyfire">
<strong>Get compound class based on classyfire</strong><a class="anchor" aria-label="anchor" href="#get-compound-class-based-on-classyfire"></a>
</h1>
<p>Refer this publication: <a href="https://jcheminf.biomedcentral.com/articles/10.1186/s13321-016-0174-y" class="external-link uri">https://jcheminf.biomedcentral.com/articles/10.1186/s13321-016-0174-y</a></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">result</span> <span class="op">=</span> 
<span class="fu"><a href="../reference/get_compound_class.html">get_compound_class</a></span><span class="op">(</span>
  inchikey <span class="op">=</span> <span class="st">"QZDWODWEESGPLC-UHFFFAOYSA-N"</span>,
  server <span class="op">=</span> <span class="st">"http://classyfire.wishartlab.com/entities/"</span>,
  sleep <span class="op">=</span> <span class="fl">5</span>
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">result</span>
<span class="co">#&gt; [1] NA</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="other-tools">
<strong>Other tools</strong><a class="anchor" aria-label="anchor" href="#other-tools"></a>
</h1>
<div class="section level2">
<h2 id="rename-one-vector-with-duplicated-items-">Rename one vector with duplicated items.<a class="anchor" aria-label="anchor" href="#rename-one-vector-with-duplicated-items-"></a>
</h2>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/name_duplicated.html">name_duplicated</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"a"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "a_1" "a_2" "b_1" "c_1" "a_3" "b_2" "c_2" "a_4"</span>
<span class="fu"><a href="../reference/name_duplicated.html">name_duplicated</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "1_1" "1_2" "1_3" "1_4" "1_5" "2"</span>
<span class="fu"><a href="../reference/name_duplicated.html">name_duplicated</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="open-the-current-working-directory-in-r">Open the current working directory in R<a class="anchor" aria-label="anchor" href="#open-the-current-working-directory-in-r"></a>
</h2>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">####just open the current working directory</span>
<span class="fu"><a href="../reference/openwd.html">openwd</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">###A new folder will be opened and pop up</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="set-working-directory-in-windows">Set working directory in <code>Windows</code><a class="anchor" aria-label="anchor" href="#set-working-directory-in-windows"></a>
</h2>
<p>Copy the file path in <code>File explorer</code> in <code>Windows</code>.</p>
<p>Then type in R:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setwd_win.html">setwd_win</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Then paste the file path and type <code>Enter</code>.</p>
</div>
<div class="section level2">
<h2 id="set-working-directory-where-a-r-project-is-in">Set working directory where a R project is in<a class="anchor" aria-label="anchor" href="#set-working-directory-where-a-r-project-is-in"></a>
</h2>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setwd_project.html">setwd_project</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-the-operate-system">Check the operate system<a class="anchor" aria-label="anchor" href="#check-the-operate-system"></a>
</h2>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_os.html">get_os</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "osx"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-version-of-masstools">Check version of <code>masstools</code><a class="anchor" aria-label="anchor" href="#check-version-of-masstools"></a>
</h2>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/masstools_logo.html">masstools_logo</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BB00;">Thank you for using masstools!</span></span>
<span class="co"><span style="color: #00BB00;">#&gt; Version 0.99.1 (2021-12-26)</span></span>
<span class="co"><span style="color: #00BB00;">#&gt; More information: search 'tidymass masstools'</span></span>
<span class="co"><span style="color: #00BB00;">#&gt;   _   _          _______          _     </span></span>
<span class="co">#&gt; <span style="color: #00BB00;"> | | (_)        |__   __|        | |    </span></span>
<span class="co">#&gt; <span style="color: #00BB00;"> | |_ _ _ __  _   _| | ___   ___ | |___ </span></span>
<span class="co">#&gt; <span style="color: #00BB00;"> | __| | '_ \| | | | |/ _ \ / _ \| / __|</span></span>
<span class="co">#&gt; <span style="color: #00BB00;"> | |_| | | | | |_| | | (_) | (_) | \__ \</span></span>
<span class="co">#&gt; <span style="color: #00BB00;">  \__|_|_| |_|\__, |_|\___/ \___/|_|___/</span></span>
<span class="co">#&gt; <span style="color: #00BB00;">               __/ |                    </span></span>
<span class="co">#&gt; <span style="color: #00BB00;">              |___/                     </span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-conflicts-of-masstools">Check conflicts of <code>masstools</code><a class="anchor" aria-label="anchor" href="#check-conflicts-of-masstools"></a>
</h2>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/masstools_conflicts.html">masstools_conflicts</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── masstools_conflicts() ──</span>
<span class="co">#&gt; <span style="color: #BB0000;">x</span> <span style="color: #0000BB;">methods</span>::<span style="color: #00BB00;">body&lt;-()</span>    masks <span style="color: #0000BB;">base</span>::body&lt;-()</span>
<span class="co">#&gt; <span style="color: #BB0000;">x</span> <span style="color: #0000BB;">methods</span>::<span style="color: #00BB00;">kronecker()</span> masks <span style="color: #0000BB;">base</span>::kronecker()</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="list-all-pacakges-in-masstools">List all pacakges in <code>masstools</code><a class="anchor" aria-label="anchor" href="#list-all-pacakges-in-masstools"></a>
</h2>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/masstools_packages.html">masstools_packages</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] "dplyr"       "magrittr"    "tibble"      "tidyr"       "stringr"    </span>
<span class="co">#&gt;  [6] "rstudioapi"  "ggplot2"     "methods"     "crayon"      "cli"        </span>
<span class="co">#&gt; [11] "purrr"       "plotly"      "pbapply"     "clisymbols"  "htmltools"  </span>
<span class="co">#&gt; [16] "httr"        "plyr"        "readxl"      "rvest"       "xml2"       </span>
<span class="co">#&gt; [21] "htmlwidgets" "leaflet"     "stats"       "utils"       "masstools"</span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="session-information">
<strong>Session information</strong><a class="anchor" aria-label="anchor" href="#session-information"></a>
</h1>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; R Under development (unstable) (2022-01-11 r81473)</span>
<span class="co">#&gt; Platform: x86_64-apple-darwin17.0 (64-bit)</span>
<span class="co">#&gt; Running under: macOS Big Sur/Monterey 10.16</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Matrix products: default</span>
<span class="co">#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib</span>
<span class="co">#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; locale:</span>
<span class="co">#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attached base packages:</span>
<span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; other attached packages:</span>
<span class="co">#&gt; [1] magrittr_2.0.1   masstools_0.99.1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; loaded via a namespace (and not attached):</span>
<span class="co">#&gt;  [1] Rcpp_1.0.7        tidyr_1.1.3       clisymbols_1.2.0  assertthat_0.2.1 </span>
<span class="co">#&gt;  [5] rprojroot_2.0.2   digest_0.6.27     utf8_1.2.2        R6_2.5.0         </span>
<span class="co">#&gt;  [9] cellranger_1.1.0  plyr_1.8.6        evaluate_0.14     httr_1.4.2       </span>
<span class="co">#&gt; [13] ggplot2_3.3.5     highr_0.9         pillar_1.6.2      rlang_0.4.11     </span>
<span class="co">#&gt; [17] lazyeval_0.2.2    curl_4.3.2        readxl_1.3.1      rstudioapi_0.13  </span>
<span class="co">#&gt; [21] data.table_1.14.0 jquerylib_0.1.4   rmarkdown_2.11    pkgdown_2.0.1    </span>
<span class="co">#&gt; [25] desc_1.3.0        labeling_0.4.2    stringr_1.4.0     selectr_0.4-2    </span>
<span class="co">#&gt; [29] htmlwidgets_1.5.3 munsell_0.5.0     compiler_4.2.0    xfun_0.29        </span>
<span class="co">#&gt; [33] pkgconfig_2.0.3   htmltools_0.5.2   tidyselect_1.1.1  tibble_3.1.3     </span>
<span class="co">#&gt; [37] fansi_0.5.0       viridisLite_0.4.0 crayon_1.4.1      dplyr_1.0.7      </span>
<span class="co">#&gt; [41] grid_4.2.0        jsonlite_1.7.2    gtable_0.3.0      lifecycle_1.0.0  </span>
<span class="co">#&gt; [45] DBI_1.1.1         scales_1.1.1      cli_3.0.1         stringi_1.7.3    </span>
<span class="co">#&gt; [49] cachem_1.0.5      pbapply_1.4-3     farver_2.1.0      fs_1.5.0         </span>
<span class="co">#&gt; [53] leaflet_2.0.4.1   xml2_1.3.2        bslib_0.3.1       ellipsis_0.3.2   </span>
<span class="co">#&gt; [57] generics_0.1.0    vctrs_0.3.8       tools_4.2.0       glue_1.4.2       </span>
<span class="co">#&gt; [61] purrr_0.3.4       crosstalk_1.1.1   parallel_4.2.0    fastmap_1.1.0    </span>
<span class="co">#&gt; [65] yaml_2.2.1        colorspace_2.0-2  rvest_1.0.1       memoise_2.0.0    </span>
<span class="co">#&gt; [69] plotly_4.9.4.1    knitr_1.33        sass_0.4.0</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>masstools Developed by Xiaotao Shen, Chuchu Wang. <br> from <i class="fa fa-university"></i> Stanford University <br><i class="fa fa-clinic-medical"></i>School of Medicine <br><i class="fa fa-dna"></i> Genetics Department</p>
</div>

<div class="pkgdown">
  <p></p>
<p><b>Contact Us:</b> <br><i class="fa fa-envelope"></i> <a href="mailto:shenxt1990@outlook.com" class="email">shenxt1990@outlook.com</a> <br><i class="fa fa-weixin"></i> <a href="https://www.shenxt.info/files/wechat_QR.jpg" class="external-link">shenxt1990</a> <br><i class="fa fa-network-wired"></i> <a href="https://tidymass.github.io/tidymass/" class="external-link">A part of tidymass</a></p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '21ff2860978c5d2ceb7d4150364070ff',
    indexName: 'masstools',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
